import{s as Ue,a as Ne,m as qe,t as L,i as p,c as i,S as $,b as U,d as w,e as X,f as pe,g as _,h as je,j as h,k as c,l as Ae,n as Fe,r as ze,o as Re,p as V,u as ge,q as B,v as Be,w as G,x as me,y as Ge,z as He,A as F,B as Oe,I as We,C as K,F as J,D as Z,E as Xe,G as Ve,H as Ze,J as Je,K as Ee,L as Qe,M as Ke,N as Ye,O as et,P as tt,Q as st,R as at,T as nt,U as T,V as ot,W as rt,X as N,Y as lt,Z as it,_ as ct,$ as ut,a0 as dt}from"./vendor-5507c805.js";(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&n(l)}).observe(document,{childList:!0,subtree:!0});function o(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerPolicy&&(s.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?s.credentials="include":a.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(a){if(a.ep)return;a.ep=!0;const s=o(a);fetch(a.href,s)}})();const pt="modulepreload",gt=function(e,t){return new URL(e,t).href},ee={},q=function(t,o,n){if(!o||o.length===0)return t();const a=document.getElementsByTagName("link");return Promise.all(o.map(s=>{if(s=gt(s,n),s in ee)return;ee[s]=!0;const l=s.endsWith(".css"),m=l?'[rel="stylesheet"]':"";if(!!n)for(let u=a.length-1;u>=0;u--){const g=a[u];if(g.href===s&&(!l||g.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${s}"]${m}`))return;const r=document.createElement("link");if(r.rel=l?"stylesheet":pt,l||(r.as="script",r.crossOrigin=""),r.href=s,document.head.appendChild(r),l)return new Promise((u,g)=>{r.addEventListener("load",u),r.addEventListener("error",()=>g(new Error(`Unable to preload CSS for ${s}`)))})})).then(()=>t()).catch(s=>{const l=new Event("vite:preloadError",{cancelable:!0});if(l.payload=s,window.dispatchEvent(l),!l.defaultPrevented)throw s})},mt=w('<div class="loading loading-spinner">'),ft=w('<button><span class="truncate rounded-none">'),fe=e=>{const[t,o]=Ue(e,["class","loading","icon"]);return(()=>{const n=ft(),a=n.firstChild;return Ne(n,qe({get class(){return L("btn flex items-center",t.loading?"btn-disabled":t.class)}},o),!1,!0),p(n,i($,{get when(){return t.loading},get children(){return mt()}}),a),p(a,()=>e.icon||e.children),U(()=>a.classList.toggle("flex-1",!t.icon)),n})()},ht=w('<div><div class="collapse-title pr-4 text-xl font-medium after:!top-8"></div><div>'),Gs=e=>{const{title:t,onCollapse:o}=e,n=()=>{const s="collapse-open",l="collapse-close";return e.isOpen?s:l},a=()=>{const s="opacity-100",l="opacity-0";return e.isOpen?s:l};return(()=>{const s=ht(),l=s.firstChild,m=l.nextSibling;return l.$$click=()=>o(!e.isOpen),p(l,t),p(m,i($,{get when(){return e.isOpen},get children(){return pe(()=>e.children)()}})),U(d=>{const r=L(n(),"collapse collapse-arrow select-none border-secondary bg-base-200 shadow-md"),u=L(a(),"collapse-content grid grid-cols-2 gap-2 transition-opacity duration-1000 lg:grid-cols-3 xl:grid-cols-4 2xl:grid-cols-5");return r!==d._v$&&_(s,d._v$=r),u!==d._v$2&&_(m,d._v$2=u),d},{_v$:void 0,_v$2:void 0}),s})()};X(["click"]);const vt=["light","dark","cupcake","bumblebee","emerald","corporate","synthwave","retro","cyberpunk","valentine","halloween","garden","forest","aqua","lofi","pastel","fantasy","wireframe","black","luxury","dracula","cmyk","autumn","business","acid","lemonade","night","coffee","winter"];var x=(e=>(e.Overview="/overview",e.Proxies="/proxies",e.Rules="/rules",e.Conns="/conns",e.Log="/logs",e.Config="/config",e.Setup="/setup",e))(x||{});const yt=10,Hs={title:{align:"center",style:{color:"gray",fontSize:"16px"}},chart:{toolbar:{show:!1},zoom:{enabled:!1},animations:{easing:"linear"}},noData:{text:"Loading..."},legend:{showForSingleSeries:!0,fontSize:"16px",labels:{colors:"gray"},itemMargin:{horizontal:32}},dataLabels:{enabled:!1},grid:{yaxis:{lines:{show:!1}}},stroke:{curve:"smooth"},tooltip:{enabled:!1},xaxis:{range:yt,labels:{show:!1},axisTicks:{show:!1}},yaxis:{labels:{style:{colors:"gray",fontSize:"13px"},formatter:e=>je(e).toString()}}};var Y=(e=>(e[e.NOT_CONNECTED=-1]="NOT_CONNECTED",e[e.MEDIUM=200]="MEDIUM",e[e.HIGH=500]="HIGH",e))(Y||{}),he=(e=>(e[e.NOT_CONNECTED=-1]="NOT_CONNECTED",e[e.MEDIUM=800]="MEDIUM",e[e.HIGH=1500]="HIGH",e))(he||{}),ve=(e=>(e.OFF="off",e.DOTS="dots",e.BAR="bar",e.Auto="auto",e))(ve||{}),I=(e=>(e.NATURAL="orderNatural",e.LATENCY_ASC="orderLatency_asc",e.LATENCY_DESC="orderLatency_desc",e.NAME_ASC="orderName_asc",e.NAME_DESC="orderName_desc",e))(I||{}),H=(e=>(e.EN="en-US",e.ZH="zh-CN",e))(H||{}),ye=(e=>(e.Details="details",e.Close="close",e.ID="ID",e.Type="type",e.Process="process",e.Host="host",e.SniffHost="sniffHost",e.Rule="rules",e.Chains="chains",e.DlSpeed="dlSpeed",e.ULSpeed="ulSpeed",e.Download="dl",e.Upload="ul",e.ConnectTime="connectTime",e.SourceIP="sourceIP",e.SourcePort="sourcePort",e.Destination="destination",e.InboundUser="inboundUser",e))(ye||{});const te=200,be=Object.values(ye),bt={...Object.fromEntries(be.map(e=>[e,!0])),ID:!1};var k=(e=>(e.XS="xs",e.SM="sm",e.MD="md",e.LG="lg",e))(k||{}),xt=(e=>(e.Global="global",e.Rule="rule",e.Direct="direct",e))(xt||{}),xe=(e=>(e.Info="info",e.Error="error",e.Warning="warning",e.Debug="debug",e.Silent="silent",e))(xe||{});const wt=[200,300,500,800,1e3],Pt=wt[0],Ct={add:"Add",overview:"Overview",proxies:"Proxies",proxiesSettings:"Proxies Settings",rules:"Rules",connections:"Connections",connectionsSettings:"Connections Settings",connectionsDetails:"Connections Details",logs:"Logs",logsSettings:"Logs Settings",config:"Config",upload:"Upload",download:"Download",uploadTotal:"Upload Total",downloadTotal:"Download Total",activeConnections:"Active Connections",memoryUsage:"Memory Usage",traffic:"Traffic",memory:"Memory",down:"Down",up:"Up",proxyProviders:"Proxy Providers",ruleProviders:"Rule Providers",search:"Search",ID:"ID",type:"Type",name:"Name",process:"Process",host:"Host",sniffHost:"Sniff Host",chains:"Chains",connectTime:"Time",dlSpeed:"DL Speed",ulSpeed:"UL Speed",dl:"DL",ul:"UL",sourceIP:"Source IP",sourcePort:"Source Port",destination:"Destination",inboundUser:"Inbound User",close:"Close",reset:"Reset",dnsQuery:"DNS Query",dots:"Dots",bar:"Bar",auto:"Auto",off:"Off",proxiesPreviewType:"Proxies preview type",urlForIPv6SupportTest:"URL for IPv6 support test",urlForLatencyTest:"URL for latency test",autoCloseConns:"Automatically Close connections",useTwemoji:"Use Twemoji Mozilla Font",autoSwitchTheme:"Automatically switch theme",favDayTheme:"Favorite light theme",favNightTheme:"Favorite dark theme",renderInTwoColumns:"Render in two columns",updateGEODatabases:"Update GEO Databases",restartCore:"Restart Core",upgradeCore:"Upgrade Core",proxiesSorting:"Proxies Sorting",orderNatural:"Original order in config file",orderLatency_asc:"By latency from low to high",orderLatency_desc:"By latency from high to low",orderName_asc:"By name alphabetically (A-Z)",orderName_desc:"By name alphabetically (Z-A)",ms:"ms",updated:"Updated",tableSize:"Table size",logLevel:"Log Level",info:"info",silent:"silent",debug:"debug",warning:"warning",error:"error",logMaxRows:"Log Maximum Reserved Rows",xs:"Extra small size",sm:"Small size",md:"Normal size",lg:"Large size",switchEndpoint:"Switch Endpoint",switchLanguage:"Switch Language",latencyTestTimeoutDuration:"Latency Test Timeout Duration",all:"All",sequence:"Sequence",payload:"Payload",details:"Details",endpointURL:"Endpoint URL",secret:"Secret",global:"Global",rule:"Rule",direct:"Direct",active:"Active",closed:"Closed",sort:"Sort",hideUnAvailableProxies:"Hide UnAvailable Proxies",reloadConfig:"Reload Config",flushFakeIP:"Flush Fake-IP",tagClientSourceIPWithName:"Tag Client Source IP With Name",tag:"Tag",coreConfig:"Core Config",xdConfig:"XD Config",version:"Version",expire:"Expire",noExpire:"Null",enableTunDevice:"Enable TUN Device",tunModeStack:"TUN Mode Stack",tunDeviceName:"TUN Device Name",interfaceName:"Interface Name",en:"English",zh:"Chinese",port:"{{ name }} Port"},$t={add:"添加",overview:"概览",proxies:"代理",proxiesSettings:"代理设置",rules:"规则",connections:"连接",connectionsSettings:"连接设置",connectionsDetails:"连接详情",logs:"日志",logsSettings:"日志设置",config:"配置",upload:"上传",download:"下载",uploadTotal:"上传总量",downloadTotal:"下载总量",activeConnections:"活动连接",memoryUsage:"内存使用情况",traffic:"流量",memory:"内存",down:"下载",up:"上传",proxyProviders:"代理提供者",ruleProviders:"规则提供者",search:"搜索",ID:"ID",type:"类型",name:"名字",process:"进程",host:"主机",sniffHost:"嗅探域名",chains:"链路",connectTime:"连接时间",dlSpeed:"下载速度",ulSpeed:"上传速度",dl:"下载量",ul:"上传量",sourceIP:"源地址",sourcePort:"源端口",destination:"目标地址",inboundUser:"入站用户",close:"关闭",reset:"重置",dnsQuery:"DNS 查询",dots:"点阵",bar:"条形",auto:"自适应",off:"关闭",proxiesPreviewType:"节点组预览样式",urlForIPv6SupportTest:"测试 IPv6 支持链接",urlForLatencyTest:"测速链接",autoCloseConns:"自动断开连接",useTwemoji:"使用 Twemoji Mozilla 字体",autoSwitchTheme:"自动切换主题",favDayTheme:"浅色主题偏好",favNightTheme:"深色主题偏好",renderInTwoColumns:"双列渲染",updateGEODatabases:"更新 GEO 数据库",restartCore:"重启核心",upgradeCore:"更新核心",proxiesSorting:"节点排序",orderNatural:"原配置文件中的排序",orderLatency_asc:"按延迟从低到高",orderLatency_desc:"按延迟从高到低",orderName_asc:"按名称字母排序 (A-Z)",orderName_desc:"按名称字母排序 (Z-A)",ms:"毫秒",updated:"更新于",tableSize:"表格大小",logLevel:"日志等级",info:"信息",silent:"静默",debug:"调试",warning:"警告",error:"错误",logMaxRows:"日志最大保留行数",xs:"超小尺寸",sm:"小尺寸",md:"正常尺寸",lg:"超大尺寸",switchEndpoint:"切换后端",switchLanguage:"切换语言",latencyTestTimeoutDuration:"测速超时时间",all:"全部",sequence:"序列号",payload:"内容",details:"详情",endpointURL:"后端地址",secret:"密钥",global:"全局",rule:"规则",direct:"直连",active:"活动",closed:"已关闭",sort:"排序",hideUnAvailableProxies:"隐藏不可用节点",reloadConfig:"重载配置",flushFakeIP:"清空 Fake-IP",tagClientSourceIPWithName:"为客户端源 IP 地址添加名称标记",tag:"标记",coreConfig:"核心配置",xdConfig:"XD 配置",version:"版本",expire:"到期时间",noExpire:"不限时",enableTunDevice:"开启 TUN 转发",tunModeStack:"TUN 模式堆栈",tunDeviceName:"TUN 设备名称",interfaceName:"接口名称",en:"英文",zh:"中文",port:"{{ name }} 端口"},we={[H.EN]:Ct,[H.ZH]:$t},[St,Os]=h(c(Reflect.has(we,navigator.language)?navigator.language:H.EN),{name:"lang",storage:localStorage}),[Tt,Dt]=Ae(e=>[Fe(()=>Re(we[e.locale]),ze)]),Pe=()=>Dt(),[Ws,Xs]=h(c(ve.Auto),{name:"proxiesPreviewType",storage:localStorage}),[Vs,Zs]=h(c(I.NATURAL),{name:"proxiesOrderingType",storage:localStorage}),[Js,Es]=h(c(!1),{name:"hideUnAvailableProxies",storage:localStorage}),[Qs,Ks]=h(c(!0),{name:"renderProxiesInTwoColumns",storage:localStorage}),[O,Ys]=h(c("https://www.gstatic.com/generate_204"),{name:"urlForLatencyTest",storage:localStorage}),[E,ea]=h(c("https://api-ipv6.ip.sb/ip"),{name:"urlForIPv6SupportTest",storage:localStorage}),[Lt,ta]=h(c(!1),{name:"autoCloseConns",storage:localStorage}),[It,sa]=h(c(!0),{name:"useTwemoji",storage:localStorage}),[kt,aa]=h(c(!1),{name:"autoSwitchTheme",storage:localStorage}),[Mt,na]=h(c("lofi"),{name:"favDayTheme",storage:localStorage}),[_t,oa]=h(c("business"),{name:"favNightTheme",storage:localStorage}),[ra,la]=h(c(k.XS),{name:"connectionsTableSize",storage:localStorage}),[ia,ca]=h(c(bt),{name:"connectionsTableColumnVisibility",storage:localStorage}),[ua,da]=h(c(be),{name:"connectionsTableColumnOrder",storage:localStorage}),[pa,ga]=h(c([]),{name:"clientSourceIPTags",storage:localStorage}),[ma,fa]=h(c(k.XS),{name:"logsTableSize",storage:localStorage}),[ha,va]=h(c(xe.Info),{name:"logLevel",storage:localStorage}),[ya,ba]=h(c(Pt),{name:"logMaxRows",storage:localStorage}),xa=e=>{let t="table-xs";switch(e){case k.XS:t="table-xs";break;case k.SM:t="table-sm";break;case k.MD:t="table-md";break;case k.LG:t="table-lg";break}return t},[R,wa]=h(c(5e3),{name:"latencyTestTimeoutDuration",storage:localStorage}),Ut=()=>O().startsWith("https"),D=()=>Ut()?he:Y,[Nt,Ce]=c([]),[$e,qt]=c(null),Pa=()=>{const[e,t]=c([]),[o,n]=c([]),[a,s]=c(!1);return V(()=>{var m;const l=(m=$e())==null?void 0:m.connections;l&&ge(()=>{const d=Se(l,o());if(jt(o()),!a()){const r=At(d,Nt());n(d),t(r.slice(-te))}Ce(r=>r.slice(-(d.length+te)))})}),{closedConnections:e,activeConnections:o,paused:a,setPaused:s}},Se=(e,t)=>{const o=new Map;return t.forEach(n=>o.set(n.id,n)),e.map(n=>{const a=o.get(n.id);return!a||!B.isNumber(a.download)||!B.isNumber(a.upload)?{...n,downloadSpeed:0,uploadSpeed:0}:{...n,downloadSpeed:n.download-a.download,uploadSpeed:n.upload-a.upload}})},jt=e=>{Ce(t=>B.unionWith(t,e,(o,n)=>o.id===n.id))},At=(e,t)=>B.differenceWith(t,e,(o,n)=>o.id===n.id),Ca=()=>b().delete("connections"),Ft=e=>b().delete(`connections/${e}`),[$a,se]=c(!1),[Sa,ae]=c(!1),[Ta,ne]=c(!1),[Da,oe]=c(!1),[La,re]=c(!1),Ia=async()=>{const e=b();se(!0);try{await e.put("configs",{searchParams:{force:!0},json:{path:"",payload:""}})}catch{}se(!1)},ka=async()=>{const e=b();ne(!0);try{await e.post("cache/fakeip/flush")}catch{}ne(!1)},Ma=async()=>{const e=b();ae(!0);try{await e.post("configs/geo")}catch{}ae(!1)},_a=async()=>{const e=b();oe(!0);try{await e.post("upgrade")}catch{}oe(!1)},Ua=async()=>{const e=b();re(!0);try{await e.post("restart")}catch{}re(!1)},Na=()=>b().get("configs").json(),qa=async(e,t,o)=>{try{await b().patch("configs",{json:{[e]:t}}).json(),await o()}catch(n){Be.error(n.message)}},ja=async()=>{const e=b(),{version:t}=await e.get("version").json();return t},zt=()=>b().get("providers/proxies").json(),Rt=()=>b().get("proxies").json(),le=e=>b().put(`providers/proxies/${e}`),Te=e=>b().get(`providers/proxies/${e}/healthcheck`,{timeout:5*1e3}).json(),Bt=(e,t)=>b().put(`proxies/${e}`,{body:JSON.stringify({name:t})}),ie=(e,t,o,n)=>{const a=b();return t!==""?Te(t).then(s=>({delay:s[e]})):a.get(`proxies/${e}/delay`,{searchParams:{url:o,timeout:n}}).json()},ce=(e,t,o)=>b().get(`group/${e}/delay`,{searchParams:{url:t,timeout:o}}).json(),Aa=()=>b().get("rules").json(),Fa=()=>b().get("providers/rules").json(),za=e=>b().put(`providers/rules/${e}`),Ra=async e=>{const t=/(alpha|beta|meta)-?(\w+)/.exec(e);if(!t)return!1;const o=t[1],n=t[2];if(o==="meta"){const{assets:a}=await G.get("https://api.github.com/repos/MetaCubeX/Clash.Meta/releases/latest").json();return!a.some(({name:l})=>l.includes(n))}if(o==="alpha"){const{assets:a}=await G.get("https://api.github.com/repos/MetaCubeX/Clash.Meta/releases/tags/Prerelease-Alpha").json();return!a.some(({name:l})=>l.includes(n))}return!1},Ba=e=>e.includes("sing-box"),Ga=e=>/^https?/.test(e)?e:`${window.location.protocol}//${e}`,z=()=>{const[e,t]=c({}),o=(a,s)=>{t({...e(),[a]:s})};return{map:e,set:o,setWithCallback:async(a,s)=>{o(a,!0);try{await s()}catch{}o(a,!1)}}},Gt=(e="")=>{const t=e.toLowerCase();return t.includes("shadowsocks")?t.replace("shadowsocks","ss"):t==="hysteria"?"hy":t==="wireguard"?"wg":t},Ht=(e="")=>{const t=e.toLowerCase();return!["selector","direct","reject","urltest","loadbalance","fallback","relay"].includes(t)},Ha=(e,t,o)=>o===I.NATURAL?e:e.sort((n,a)=>{const s=t[n],l=t[a];switch(o){case I.LATENCY_ASC:return s===D().NOT_CONNECTED?1:l===D().NOT_CONNECTED?-1:s-l;case I.LATENCY_DESC:return s===D().NOT_CONNECTED?1:l===D().NOT_CONNECTED?-1:l-s;case I.NAME_ASC:return n.localeCompare(a);case I.NAME_DESC:return a.localeCompare(n);default:return 0}}),Oa=(e,t,o)=>o?e.filter(n=>t[n]!==D().NOT_CONNECTED):e,{map:Ot,set:Wt}=z(),{map:Xt,setWithCallback:Vt}=z(),{map:Zt,setWithCallback:Jt}=z(),{map:Et,setWithCallback:Qt}=z(),{map:Kt,setWithCallback:Yt}=z(),[es,ue]=c(!1),[ts,ss]=c([]),[de,as]=c([]),[De,Q]=c({}),[Le,A]=c({}),[Ie,ns]=c({}),os=e=>{const t={...Ie()},o={...De()},n={...Le()},a=(s,l,m=!0)=>{var r,u,g,v;const d=(r=s.extra)==null?void 0:r[l];if(Array.isArray(d)){const y=(u=d.at(-1))==null?void 0:u.delay;if(y||!m)return y}return(v=(g=s.history)==null?void 0:g.at(-1))==null?void 0:v.delay};e.forEach(s=>{const{udp:l,xudp:m,type:d,now:r,name:u,provider:g=""}=s;t[s.name]={udp:l,xudp:m,type:d,now:r,name:u,provider:g};const v=a(s,O())||D().NOT_CONNECTED;o[s.name]=v;const y=(a(s,E(),!1)??0)>0;n[s.name]=y}),me(()=>{ns(t),Q(o),A(n)})},W=()=>{const e=async()=>{const[{providers:r},{proxies:u}]=await Promise.all([zt(),Rt()]),g=[...u.GLOBAL.all??[],"GLOBAL"],v=Object.values(u).filter(C=>{var f;return(f=C.all)==null?void 0:f.length}).sort((C,f)=>g.indexOf(C.name)-g.indexOf(f.name)),y=Object.values(r).filter(C=>C.name!=="default"&&C.vehicleType!=="Compatible"),P=[...Object.values(u),...y.flatMap(C=>C.proxies.filter(f=>!(f.name in u)).map(f=>({...f,provider:C.name})))];me(()=>{ss(v),as(y),os(P)})},t=async(r,u)=>{await Bt(r.name,u),await e(),Lt()&&ge(()=>{var v;const g=Se(((v=$e())==null?void 0:v.connections)??[],[]);g.length>0&&g.forEach(({id:y,chains:P})=>{P.includes(r.name)&&Ft(y)})})},o=async(r,u)=>{const g=E();if(!g||g.length===0){A({});return}let v=!1;try{const{delay:y}=await ie(r,u,g,R());v=y>0}catch{v=!1}A(y=>({...y,[r]:v}))},n=async r=>{const u=E();if(!u||u.length===0){A({});return}const g=await ce(r,u,R()),v=Object.fromEntries(Object.entries(g).map(([y,P])=>[y,P>0]));A(y=>({...y,...v}))};return{collapsedMap:Ot,setCollapsedMap:Wt,proxyIPv6SupportMap:Le,proxyLatencyTestingMap:Xt,proxyGroupLatencyTestingMap:Zt,proxyProviderLatencyTestingMap:Et,updatingMap:Kt,isAllProviderUpdating:es,proxies:ts,proxyProviders:de,proxyLatencyTest:async(r,u)=>{Vt(r,async()=>{const{delay:g}=await ie(r,u,O(),R());Q(v=>({...v,[r]:g}))}),await o(r,u)},proxyGroupLatencyTest:async r=>{Jt(r,async()=>{const u=await ce(r,O(),R());Q(g=>({...g,...u})),await e()}),await n(r)},latencyMap:De,proxyNodeMap:Ie,fetchProxies:e,selectProxyInGroup:t,updateProviderByProviderName:r=>Yt(r,async()=>{try{await le(r)}catch{}await e()}),updateAllProvider:async()=>{ue(!0);try{await Promise.allSettled(de().map(r=>le(r.name))),await e()}finally{ue(!1)}},proxyProviderLatencyTest:r=>Qt(r,async()=>{await Te(r),await e()})}},[rs,Wa]=h(c(""),{name:"selectedEndpoint",storage:localStorage}),[ls,Xa]=h(c([]),{name:"endpointList",storage:localStorage}),b=()=>{const e=M();if(!e)return G.create({});const t=new Headers;return e.secret&&t.set("Authorization",`Bearer ${e.secret}`),G.create({prefixUrl:e.url,headers:t})},M=()=>ls().find(({id:e})=>e===rs()),is=()=>{var e;return(e=M())==null?void 0:e.secret},cs=()=>{var e;return new URL(((e=M())==null?void 0:e.url)??"").origin.replace("http","ws")},us=(e,t={})=>{const o=new URLSearchParams(t);o.set("token",is()??"");const n=Ge(`${cs()}/${e}?${o.toString()}`),a=He(n,"message");return F(()=>{var l;return a()?JSON.parse((l=a())==null?void 0:l.data):null})},[ds,ke]=h(c("halloween"),{name:"theme",storage:localStorage}),ps=w('<li class="tooltip tooltip-bottom">'),gs=w('<div class="drawer drawer-end w-auto sm:ml-auto"><input id=themes type=checkbox class=drawer-toggle><div class="drawer-content flex items-center"><label for=themes class="btn btn-circle btn-primary drawer-button btn-sm"></label></div><div class=drawer-side><label for=themes class=drawer-overlay></label><ul class="menu rounded-l-box gap-2 bg-base-300 p-2">'),ms=w('<li class="btn btn-xs">'),fs=w('<div class="navbar-center hidden lg:flex"><ul class="menu menu-horizontal menu-lg gap-2 p-0">'),hs=w('<ul class="navbar z-50 flex w-auto items-center justify-center bg-base-300 px-4 shadow-lg"><div class="navbar-start gap-4"><div class="drawer w-auto lg:hidden"><input id=navs type=checkbox class=drawer-toggle><div class="drawer-content flex items-center"><label for=navs class="btn btn-circle drawer-button btn-sm"></label></div><div class=drawer-side><label for=navs class=drawer-overlay></label><ul class="menu rounded-r-box min-h-full w-2/5 gap-2 bg-base-300 pt-20"></ul></div></div></div><div class=navbar-end><div class="flex items-center gap-2">'),vs=w("<li>"),ys=({href:e,tooltip:t,children:o})=>(()=>{const n=ps();return Z(n,"data-tip",t),p(n,i(K,{class:"rounded-box",href:e,children:o})),n})(),bs=()=>(()=>{const e=gs(),t=e.firstChild,o=t.nextSibling,n=o.firstChild,a=o.nextSibling,s=a.firstChild,l=s.nextSibling;return p(n,i(Xe,{})),p(l,i(J,{each:vt,children:m=>(()=>{const d=ms();return d.$$click=()=>ke(m),Z(d,"data-theme",m),p(d,m),d})()})),e})(),xs=()=>{const[e]=Pe(),t=()=>[{href:x.Overview,name:e("overview"),icon:i(Ve,{})},{href:x.Proxies,name:e("proxies"),icon:i(Ze,{})},{href:x.Rules,name:e("rules"),icon:i(Je,{})},{href:x.Conns,name:e("connections"),icon:i(Ee,{})},{href:x.Log,name:e("logs"),icon:i(Qe,{})},{href:x.Config,name:e("config"),icon:i(Ke,{})}],o=Oe(),[n,a]=c(!1);return(()=>{const s=hs(),l=s.firstChild,m=l.firstChild,d=m.firstChild,r=d.nextSibling,u=r.firstChild,g=r.nextSibling,v=g.firstChild,y=v.nextSibling,P=l.nextSibling,C=P.firstChild;return d.addEventListener("change",f=>a(f.target.checked)),p(u,i(We,{})),p(y,i(J,{get each(){return t()},children:({href:f,name:j})=>(()=>{const S=vs();return S.$$click=()=>a(!1),p(S,i(K,{href:f,children:j})),S})()})),p(l,i(Ts,{}),null),p(s,i($,{get when(){return o.pathname!==x.Setup},get children(){const f=fs(),j=f.firstChild;return p(j,i(J,{get each(){return t()},children:({href:S,name:Me,icon:_e})=>i(ys,{href:S,tooltip:Me,children:_e})})),f}}),P),p(C,i(bs,{})),U(()=>d.checked=n()),s})()};X(["click"]);const ws=w('<span class="badge badge-sm p-px"><span class=scale-75>IPv6'),Ps=e=>{const{proxyIPv6SupportMap:t}=W(),o=F(()=>t()[e.name]===!0);return i($,{get when(){return o()},get children(){return ws()}})},Cs=w("<span>"),$s=e=>{const[t]=Pe(),{latencyMap:o}=W(),[n,a]=c(""),s=F(()=>o()[e.name]);return V(()=>{a("text-success"),s()>D().HIGH?a("text-error"):s()>D().MEDIUM&&a("text-warning")}),i($,{get when(){return F(()=>typeof s()=="number")()&&s()!==Y.NOT_CONNECTED},get children(){const l=Cs();return p(l,s,null),p(l,()=>t("ms"),null),U(()=>_(l,`whitespace-nowrap text-xs ${n()}`)),l}})},Ss=w('<div class="text-md flex items-center gap-1 whitespace-nowrap font-bold uppercase sm:text-xl"><span>(</span><a class="text-primary transition-transform hover:rotate-90 hover:scale-125"href=https://github.com/metacubex/metacubexd target=_blank>xd</a><span>)'),Ts=()=>(()=>{const e=Ss(),t=e.firstChild;return p(e,i(K,{class:"bg-gradient-to-br from-primary to-secondary bg-clip-text text-transparent",get href(){return M()?"/":"/setup"},children:"metacube"}),t),e})(),Ds=w('<div class="sticky bottom-0 z-50 flex items-center justify-end bg-base-100 bg-opacity-80 p-4 backdrop-blur"><div class="flex justify-end gap-2">'),Ls=w('<dialog class="modal modal-bottom sm:modal-middle"><div class="modal-box p-0"><div><div class="flex items-center gap-4 text-xl font-bold"><span></span></div></div><div class=p-4></div></div><form method=dialog class=modal-backdrop><button>'),Is="sticky bottom-0 z-50 flex items-center justify-end bg-base-100 bg-opacity-80 p-4 backdrop-blur",Va=e=>{let t;return(()=>{const o=Ls(),n=o.firstChild,a=n.firstChild,s=a.firstChild,l=s.firstChild,m=a.nextSibling;return Ye(d=>{var r;return(t=d)&&((r=e.ref)==null?void 0:r.call(e,d))},o),n.$$contextmenu=d=>d.preventDefault(),p(s,()=>e.icon,l),p(l,()=>e.title),p(a,i(fe,{class:"btn-circle btn-sm",onClick:()=>t==null?void 0:t.close(),get icon(){return i(et,{size:20})}}),null),p(m,pe(()=>e.children)),p(n,i($,{get when(){return e.action},get children(){const d=Ds(),r=d.firstChild;return p(r,()=>e.action),d}}),null),U(()=>_(a,L(Is,"top-0 justify-between"))),o})()};X(["contextmenu"]);const ks=w('<div><div class="flex items-center justify-between gap-2"><span class="break-all text-left text-sm"></span><span class="flex items-center gap-1"></span></div><div class="flex items-center justify-between gap-1"><div></div><div class=text-xs>'),Za=e=>{const{proxyLatencyTest:t,proxyLatencyTestingMap:o}=W(),{proxyName:n,isSelected:a,onClick:s}=e,{proxyNodeMap:l}=W(),m=F(()=>l()[n]),d=()=>{var r,u,g;return Ht((r=m())==null?void 0:r.type)?(u=m())!=null&&u.xudp?"xudp":(g=m())!=null&&g.udp?"udp":null:null};return(()=>{const r=ks(),u=r.firstChild,g=u.firstChild,v=g.nextSibling,y=u.nextSibling,P=y.firstChild,C=P.nextSibling;return tt(r,"click",s,!0),Z(r,"title",n),p(g,n),p(v,i(Ps,{get name(){return e.proxyName}}),null),p(v,i(fe,{class:"btn-circle btn-ghost h-auto min-h-0 w-auto",get icon(){return i(st,{size:20,get class(){return L(o()[n]&&"animate-pulse text-success")}})},onClick:f=>{f.stopPropagation(),t(n,m().provider)}}),null),p(P,()=>{var f;return Gt((f=m())==null?void 0:f.type)},null),p(P,i($,{get when(){return d()},get children(){return` :: ${d()}`}}),null),p(C,i($s,{get name(){return e.proxyName}})),U(f=>{const j=L("card card-bordered tooltip-bottom flex flex-col justify-between gap-1 border-neutral-focus bg-neutral p-2 text-neutral-content",a&&"border-primary bg-primary-content text-primary",s&&"cursor-pointer"),S=L("text-xs text-slate-500",a&&"text-primary");return j!==f._v$&&_(r,f._v$=j),S!==f._v$2&&_(P,f._v$2=S),f},{_v$:void 0,_v$2:void 0}),r})()};X(["click"]);const Ms=w('<div><div class="flex-1 overflow-y-auto p-2 sm:p-4"><div class=pb-8>'),_s=N(()=>q(()=>import("./Setup-a0db2f96.js"),["./Setup-a0db2f96.js","./vendor-5507c805.js"],import.meta.url)),Us=N(()=>q(()=>import("./Overview-51176cc0.js"),["./Overview-51176cc0.js","./vendor-5507c805.js"],import.meta.url)),Ns=N(()=>q(()=>import("./Connections-02d8e92b.js"),["./Connections-02d8e92b.js","./vendor-5507c805.js","./index-83f95c10.js","./ConfigTitle-dd5fc83b.js","./global-9f47a568.js"],import.meta.url)),qs=N(()=>q(()=>import("./Logs-2575e4f0.js"),["./Logs-2575e4f0.js","./vendor-5507c805.js","./index-83f95c10.js","./ConfigTitle-dd5fc83b.js"],import.meta.url)),js=N(()=>q(()=>import("./Proxies-99da7d66.js"),["./Proxies-99da7d66.js","./vendor-5507c805.js","./global-9f47a568.js","./ConfigTitle-dd5fc83b.js"],import.meta.url)),As=N(()=>q(()=>import("./Rules-3b098996.js"),["./Rules-3b098996.js","./vendor-5507c805.js","./global-9f47a568.js"],import.meta.url)),Fs=N(()=>q(()=>import("./Config-8226e777.js"),["./Config-8226e777.js","./vendor-5507c805.js","./ConfigTitle-dd5fc83b.js"],import.meta.url)),zs=()=>{const e=us("connections");return V(()=>qt(e())),null},Rs=()=>{const e=at();return V(()=>{kt()&&ke(e()?_t():Mt())}),i(Tt,{get locale(){return St()},get children(){const t=Ms(),o=t.firstChild,n=o.firstChild;return p(t,i(xs,{}),o),p(n,i(nt,{get children(){return[i($,{get when(){return M()},get children(){return[i(T,{get path(){return x.Overview},component:Us}),i(T,{get path(){return x.Proxies},component:js}),i(T,{get path(){return x.Rules},component:As}),i(T,{get path(){return x.Conns},component:Ns}),i(T,{get path(){return x.Log},component:qs}),i(T,{get path(){return x.Config},component:Fs}),i(T,{path:"*",get element(){return i(ot,{get href(){return x.Overview}})}})]}}),i(T,{get path(){return M()?x.Setup:"*"},component:_s})]}}),null),p(n,i($,{get when(){return M()},get children(){return i(zs,{})}}),null),p(t,i(rt,{position:"bottom-center"}),null),U(a=>{const s=L("relative flex h-screen flex-col overscroll-y-none subpixel-antialiased",It()?"font-twemoji":"font-no-twemoji"),l=ds();return s!==a._v$&&_(t,a._v$=s),l!==a._v$2&&Z(t,"data-theme",a._v$2=l),a},{_v$:void 0,_v$2:void 0}),t}})};lt.extend(it);ct(()=>i(dt,{get source(){return ut()},get children(){return i(Rs,{})}}),document.getElementById("root"));export{Qs as $,ba as A,fe as B,yt as C,Hs as D,wt as E,ma as F,ha as G,ya as H,ta as I,Ys as J,wa as K,xe as L,Va as M,ea as N,Zs as O,I as P,Es as Q,Ks as R,Xs as S,k as T,ve as U,Lt as V,O as W,R as X,E as Y,Vs as Z,Js as _,rs as a,Ws as a0,D as a1,$s as a2,W as a3,Oa as a4,Ha as a5,Gs as a6,Za as a7,Aa as a8,Fa as a9,_t as aA,sa as aB,Os as aC,It as aD,Ra as aE,M as aF,Na as aG,za as aa,z as ab,St as ac,ja as ad,Ba as ae,b as af,qa as ag,$a as ah,Ia as ai,Sa as aj,Ma as ak,Ta as al,ka as am,Da as an,_a as ao,La as ap,Ua as aq,x as ar,xt as as,H as at,aa as au,kt as av,na as aw,vt as ax,oa as ay,Mt as az,Wa as b,us as c,be as d,ls as e,bt as f,la as g,pa as h,ga as i,ra as j,Nt as k,$e as l,Pa as m,ye as n,Ft as o,ua as p,ia as q,Ca as r,Xa as s,Ga as t,Pe as u,da as v,ca as w,xa as x,fa as y,va as z};

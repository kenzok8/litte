import{k as Q,a4 as le,i as e,c as t,S as T,d as v,a5 as y,a2 as W,N as Z,F,a1 as ae,ay as ne,p as J,P as se,b as p,D as R,a3 as K,v as re}from"./vendor-5507c805.js";import{u as j,ad as ie,ae as M,af as ce,B as E,ag as k,ah as oe,ai as de,aj as ue,ak as ge,al as pe,am as he,an as fe,ao as ve,ap as be,aq as me,b as _e,ar as $e,as as O,at as z,au as xe,av as H,aw as Ce,ax as X,ay as ke,az as ye,aA as Se,aB as we,aC as De,ac as Ee,aD as Te,aE as Ne,aF as Pe,aG as Ae}from"./index-bd53d7c8.js";import{C as S}from"./ConfigTitle-dd5fc83b.js";const Ie=v('<div class="flex flex-col p-4">'),Fe=v('<div class="flex flex-col"><form class="flex gap-2 sm:flex-row"><input type=search name=name class="input input-bordered min-w-0 flex-1"placeholder=google.com><div class="flex items-center gap-2"><select name=type class="select select-bordered"><option>A</option><option>AAAA</option><option>MX'),Le=v("<div class=py-2>"),Be=v('<form class="grid grid-cols-3 gap-2 sm:grid-cols-5">'),Re=v('<div class="grid grid-cols-2 gap-2 sm:grid-cols-4"><div class=form-control><label for=enable-tun-device class="label gap-2"><span class=label-text></span></label><input id=enable-tun-device type=checkbox class=toggle></div><div class=form-control><label for=tun-ip-stack class="label gap-2"><span class=label-text></span></label><select id=tun-ip-stack class="select select-bordered flex-1"><option>Mixed</option><option>gVisor</option><option>System</option><option>LWIP</option></select></div><div class=form-control><label for=device-name class="label gap-2"><span class=label-text></span></label><input id=device-name class="input input-bordered min-w-0"></div><div class=form-control><label for=interface-name class="label gap-2"><span class=label-text></span></label><input id=interface-name class="input input-bordered min-w-0">'),je=v('<div class="flex flex-col gap-4"><select class="select select-bordered"><option></option><option></option><option></option></select><div class="grid grid-cols-2 gap-2 sm:grid-cols-3">'),Oe=v('<div class=form-control><label class=label><span class=label-text></span></label><input type=number class="input input-bordered">'),Ge=v('<div class="flex flex-col gap-2"><div class="flex flex-col"><select class="select select-bordered"></select></div><div class="flex flex-col"><select class="select select-bordered">'),Me=v('<div class="grid grid-cols-1 gap-4 sm:grid-cols-2"><div class="flex flex-col gap-2"><div class="flex flex-col items-center"><input type=checkbox class=toggle></div></div><div class="flex flex-col gap-2"><div class="flex flex-col items-center"><input type=checkbox class=toggle></div><div class="flex flex-col"><select class="select select-bordered">'),G=v("<option>"),Qe=v('<span class="absolute -right-1 -top-1 flex h-3 w-3"><span class="absolute inline-flex h-full w-full animate-ping rounded-full bg-info opacity-75"></span><span class="inline-flex h-3 w-3 rounded-full bg-info">'),Ve=v('<div class="flex flex-col gap-2"><div class="grid grid-cols-2 gap-4"><kbd class=kbd></kbd><div class=relative><kbd class="kbd w-full"></kbd></div></div><h1 class="text-center text-lg font-bold">'),Ue=v('<div class="mx-auto flex max-w-screen-md flex-col gap-4">'),qe=y.object({name:y.string(),type:y.string()}),ze=()=>{const[r]=j(),l=ce(),{form:m,isSubmitting:n}=W({extend:K({schema:qe}),onSubmit:h=>l.get("dns/query",{searchParams:{name:h.name,type:h.type}}).json().then(({Answer:s})=>x((s==null?void 0:s.map(({data:i})=>i))||[])).catch(s=>re.error(s.message))}),[_,x]=Q([]);return(()=>{const h=Fe(),s=h.firstChild,i=s.firstChild,a=i.nextSibling;return a.firstChild,Z(m,s,()=>m),e(a,t(E,{type:"submit",class:"btn-primary",get loading(){return n()},get children(){return r("dnsQuery")}}),null),e(h,t(T,{get when(){return _().length>0},get children(){const $=Ie();return e($,t(F,{get each(){return _()},children:d=>(()=>{const g=Le();return e(g,d),g})()})),$}}),null),h})()},He=y.object({port:y.number(),"socks-port":y.number(),"redir-port":y.number(),"tproxy-port":y.number(),"mixed-port":y.number()}),Xe=({backendVersion:r})=>{const[l]=j(),m=ae(),n=[{label:()=>l("port",{name:"HTTP"}),key:"port",onChange:a=>void k("port",Number(a.target.value),i)},{label:()=>l("port",{name:"Socks"}),key:"socks-port",onChange:a=>void k("socks-port",Number(a.target.value),i)},{label:()=>l("port",{name:"Redir"}),key:"redir-port",onChange:a=>void k("redir-port",Number(a.target.value),i)},{label:()=>l("port",{name:"TProxy"}),key:"tproxy-port",onChange:a=>void k("tproxy-port",Number(a.target.value),i)},{label:()=>l("port",{name:"Mixed"}),key:"mixed-port",onChange:a=>void k("mixed-port",Number(a.target.value),i)}],{form:_,setInitialValues:x,reset:h}=W({extend:K({schema:He})}),[s,{refetch:i}]=ne(Ae);return J(()=>{const a=s();a&&(x(a),h())}),(()=>{const a=je(),$=a.firstChild,d=$.firstChild,g=d.nextSibling,w=g.nextSibling,C=$.nextSibling;return $.addEventListener("change",u=>void k("mode",u.target.value,i)),e(d,()=>l("global")),e(g,()=>l("rule")),e(w,()=>l("direct")),e(a,t(T,{get when(){return!M(r())},get children(){return[(()=>{const u=Be();return Z(_,u,()=>_),e(u,t(F,{each:n,children:c=>(()=>{const f=Oe(),N=f.firstChild,L=N.firstChild,D=N.nextSibling;return e(L,()=>c.label()),se(D,"change",c.onChange),p(b=>{const B=c.key,P=c.key,A=c.key,I=c.label();return B!==b._v$&&R(N,"for",b._v$=B),P!==b._v$2&&R(D,"id",b._v$2=P),A!==b._v$3&&R(D,"name",b._v$3=A),I!==b._v$4&&R(D,"placeholder",b._v$4=I),b},{_v$:void 0,_v$2:void 0,_v$3:void 0,_v$4:void 0}),f})()})),u})(),(()=>{const u=Re(),c=u.firstChild,f=c.firstChild,N=f.firstChild,L=f.nextSibling,D=c.nextSibling,b=D.firstChild,B=b.firstChild,P=b.nextSibling,A=D.nextSibling,I=A.firstChild,Y=I.firstChild,V=I.nextSibling,ee=A.nextSibling,U=ee.firstChild,te=U.firstChild,q=U.nextSibling;return e(N,()=>l("enableTunDevice")),L.addEventListener("change",o=>void k("tun",{enable:o.target.checked},i)),e(B,()=>l("tunModeStack")),P.addEventListener("change",o=>void k("tun",{stack:o.target.value},i)),e(Y,()=>l("tunDeviceName")),V.addEventListener("change",o=>void k("tun",{device:o.target.value},i)),e(te,()=>l("interfaceName")),q.addEventListener("change",o=>void k("interface-name",o.target.value,i)),p(()=>{var o;return L.checked=(o=s())==null?void 0:o.tun.enable}),p(()=>{var o;return P.value=(o=s())==null?void 0:o.tun.stack}),p(()=>{var o;return V.value=(o=s())==null?void 0:o.tun.device}),p(()=>{var o;return q.value=(o=s())==null?void 0:o["interface-name"]}),u})()]}}),C),e(C,t(E,{class:"btn-primary",get loading(){return oe()},onClick:de,get children(){return l("reloadConfig")}}),null),e(C,t(E,{class:"btn-secondary",get loading(){return ue()},onClick:ge,get children(){return l("updateGEODatabases")}}),null),e(C,t(E,{class:"btn-accent",get loading(){return pe()},onClick:he,get children(){return l("flushFakeIP")}}),null),e(C,t(T,{get when(){return!M(r())},get children(){return t(E,{class:"btn-error",get loading(){return fe()},onClick:ve,get children(){return l("upgradeCore")}})}}),null),e(C,t(E,{class:"btn-warning",get loading(){return be()},onClick:me,get children(){return l("restartCore")}}),null),e(C,t(E,{class:"btn-info",onClick:()=>{_e(""),m($e.Setup)},get children(){return l("switchEndpoint")}}),null),p(()=>{var u;return $.value=(u=s())==null?void 0:u.mode}),p(()=>d.value=O.Global),p(()=>g.value=O.Rule),p(()=>w.value=O.Direct),a})()},We=()=>{const[r]=j(),l=[{label:()=>r("en"),value:z.EN},{label:()=>r("zh"),value:z.ZH}];return(()=>{const m=Me(),n=m.firstChild,_=n.firstChild,x=_.firstChild,h=n.nextSibling,s=h.firstChild,i=s.firstChild,a=s.nextSibling,$=a.firstChild;return e(_,t(S,{get children(){return r("autoSwitchTheme")}}),x),x.addEventListener("change",d=>xe(d.target.checked)),e(n,t(T,{get when(){return H()},get children(){const d=Ge(),g=d.firstChild,w=g.firstChild,C=g.nextSibling,u=C.firstChild;return e(g,t(S,{get children(){return r("favDayTheme")}}),w),w.addEventListener("change",c=>Ce(c.target.value)),e(w,t(F,{each:X,children:c=>(()=>{const f=G();return f.value=c,e(f,c),f})()})),e(C,t(S,{get children(){return r("favNightTheme")}}),u),u.addEventListener("change",c=>ke(c.target.value)),e(u,t(F,{each:X,children:c=>(()=>{const f=G();return f.value=c,e(f,c),f})()})),p(()=>w.value=ye()),p(()=>u.value=Se()),d}}),null),e(s,t(S,{get children(){return r("useTwemoji")}}),i),i.addEventListener("change",d=>we(d.target.checked)),e(a,t(S,{get children(){return r("switchLanguage")}}),$),$.addEventListener("change",d=>De(d.target.value)),e($,t(F,{each:l,children:d=>(()=>{const g=G();return e(g,()=>d.label()),p(()=>g.selected=Ee()===d.value),p(()=>g.value=d.value),g})()})),p(()=>x.checked=H()),p(()=>i.checked=Te()),m})()},Ze=({backendVersion:r})=>{const[l,m]=Q(!1);return J(async()=>{const n=r();n&&m(await Ne(n))}),(()=>{const n=Ve(),_=n.firstChild,x=_.firstChild,h=x.nextSibling,s=h.firstChild,i=_.nextSibling;return e(x,()=>"1.129.0"),e(h,t(T,{get when(){return l()},get children(){return Qe()}}),s),e(s,r),e(i,()=>{var a;return(a=Pe())==null?void 0:a.url}),n})()},et=()=>{const[r]=j(),[l,m]=Q("");return le(async()=>{m(await ie())}),(()=>{const n=Ue();return e(n,t(T,{get when(){return!M(l())},get children(){return[t(S,{withDivider:!0,get children(){return r("dnsQuery")}}),t(ze,{})]}}),null),e(n,t(S,{withDivider:!0,get children(){return r("coreConfig")}}),null),e(n,t(Xe,{backendVersion:l}),null),e(n,t(S,{withDivider:!0,get children(){return r("xdConfig")}}),null),e(n,t(We,{}),null),e(n,t(S,{withDivider:!0,get children(){return r("version")}}),null),e(n,t(Ze,{backendVersion:l}),null),n})()};export{et as default};
